@model Group7A2.Models.Post

@{
    ViewBag.Title = "Details";
}

<div class="container">
    <h4>@Html.DisplayFor(model => model.Category.Name)</h4>
</div>

<div class="container">
    <h2>@Html.DisplayFor(model => model.Subject)</h2>
    <p>Post By: @Html.DisplayFor(model => model.Author) </p>
    <p>@Html.DisplayFor(model => model.PostTime)</p>
    <hr />
<p>@Html.DisplayFor(model => model.Content)</p>
@if (User.IsInRole("Admin"))
{
    @Html.ActionLink("Edit", "Edit", new { id = Model.PostId })
}
<hr />
@foreach (var com in Model.Comments)
{
    <div class="col-md-12  jumbotron-fluid mt-5 bg-light pl-3">
        <p>@Html.DisplayFor(modelItem => com.Content)</p>
        <p>Comment By: @Html.DisplayFor(modelItem => com.Author)</p>
        <p>@Html.DisplayFor(modelItem => com.PostTime)</p>
        <hr />
    </div>
}
<hr />

@using (Ajax.BeginForm("Detailes", "Posts",  new AjaxOptions
{
    InsertionMode = InsertionMode.Replace,
    HttpMethod = "POST",
    UpdateTargetId = "MainBody",
    OnSuccess = "resetForm"
}))
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal creatPersonForm">
        <h4>Add comment</h4>
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="form-group">
            <div class="col-md-10">
                @Html.EditorFor(model => model.Comments, new { htmlAttributes = new { @class = "form-control" } })
            </div>
        </div>
        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Create" class=" btn btn-default" />
            </div>
        </div>
    </div>
}
<p>
    @Html.ActionLink("Back to List", "Index", "Category")
</p>
</div>

